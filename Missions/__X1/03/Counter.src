Every 0$1 trigger not retreatAllowed and farmerRequestedCrates and farmerBaseReady and farmerCrates <= farmerRequestedCrates do
begin
enable;
display_strings := ['#X103-1', farmerRequestedCrates - farmerCrates];
farmerCrates := GetResourceType(GetBase(arDepot), mat_cans);

if GetResourceArea(collectFarmerArea, mat_cans) = 0 then
   farmerCratesCounter := farmerCratesCounter - 0$1
else
   farmerCratesCounter := 30$00;
End;